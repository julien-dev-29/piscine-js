(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const O="https://rawcdn.githack.com/akabab/superhero-api/0.2.0/api/all.json",A=async()=>{try{const e=await fetch(O);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(!Array.isArray(t))throw new Error("Invalid API response: expected array of heroes");return t}catch(e){throw console.error("Failed to fetch heroes:",e),e}},N=(e,t,n=1)=>{const a=document.querySelector(".pagination");if(a.replaceChildren(),!e||e.length===0)return;const r=Math.ceil(e.length/t);for(let s=1;s<=r;s++)if(H(s,r,n)){const o=U(s,n,t,e);a.appendChild(o)}else if(P(s,r,n)){const o=T();a.appendChild(o)}},H=(e,t,n)=>e<=5||e>t-5||Math.abs(e-n)<=1,P=(e,t,n)=>e===6&&n>4||e===t-5&&n<t-3,U=(e,t,n,a)=>{const r=document.createElement("button");return r.classList.add("btn"),r.textContent=e,e===t&&(r.disabled=!0,r.classList.add("active")),r.style.borderRadius=M(Math.ceil(a.length/n),e),r.addEventListener("click",()=>{g(a,n,e)}),r},M=(e,t)=>t===1&&e===1?(console.log("yolo"),"5px"):t===1?"5px 0 0 5px":t===e?"0 5px 5px 0":"",T=()=>{const e=document.createElement("span");return e.textContent="...",e.style.padding="8px",e},q=e=>{const t=document.querySelector(".hero-details");t.replaceChildren();const n=document.createElement("img");n.src=e.images.lg,n.alt=e.name,n.classList.add("hero-image");const a=document.createElement("div");a.classList.add("hero-info");const r=document.createElement("h2");r.textContent=e.name,r.classList.add("hero-name");const s=document.createElement("p");s.textContent=`Real Name: ${e.biography.fullName||"Unknown"}`,s.classList.add("hero-fullname");const o=document.createElement("span");o.textContent=e.biography.alignment||"unknown",o.classList.add("hero-alignment",e.biography.alignment||"unknown");const c=z(e.powerstats),l=R(e.appearance),i=j(e.biography);a.appendChild(r),a.appendChild(s),a.appendChild(o),a.appendChild(c),a.appendChild(l),a.appendChild(i),t.appendChild(n),t.appendChild(a)},z=e=>{const t=document.createElement("div");t.classList.add("detail-section");const n=document.createElement("h3");n.textContent="Powerstats",t.appendChild(n);const a=document.createElement("div");return a.classList.add("powerstats-grid"),Object.entries(e).forEach(([r,s])=>{const o=document.createElement("div");o.classList.add("stat-item");const c=document.createElement("span");c.textContent=r.charAt(0).toUpperCase()+r.slice(1),c.classList.add("stat-label");const l=document.createElement("span");l.textContent=s,l.classList.add("stat-value"),o.appendChild(c),o.appendChild(l),a.appendChild(o)}),t.appendChild(a),t},R=e=>{var s,o;const t=document.createElement("div");t.classList.add("detail-section");const n=document.createElement("h3");n.textContent="Appearance",t.appendChild(n);const a=document.createElement("ul");return a.classList.add("detail-list"),[["Race",e.race||"Unknown"],["Gender",e.gender||"Unknown"],["Height",((s=e.height)==null?void 0:s[1])||"Unknown"],["Weight",((o=e.weight)==null?void 0:o[1])||"Unknown"]].forEach(([c,l])=>{const i=document.createElement("li");i.innerHTML=`<strong>${c}:</strong> ${l}`,a.appendChild(i)}),t.appendChild(a),t},j=e=>{const t=document.createElement("div");t.classList.add("detail-section");const n=document.createElement("h3");n.textContent="Biography",t.appendChild(n);const a=document.createElement("ul");return a.classList.add("detail-list"),[["Full Name",e.fullName||"Unknown"],["Place of Birth",e.placeOfBirth||"Unknown"],["First Appearance",e.firstAppearance||"Unknown"],["Publisher",e.publisher||"Unknown"],["Alignment",e.alignment||"Unknown"]].forEach(([s,o])=>{const c=document.createElement("li");c.innerHTML=`<strong>${s}:</strong> ${o}`,a.appendChild(c)}),t.appendChild(a),t},w=e=>{if(typeof e=="number")return e;if(!e||e==="unknown")return null;const t=parseInt(e.toString().replace(/\D/g,""),10);return isNaN(t)?null:t},E=(e,t)=>{var n,a,r,s,o,c,l,i,y,C;switch(t){case"id":return e.id;case"name":return((n=e.name)==null?void 0:n.toLowerCase())||"";case"fullName":return(((a=e.biography)==null?void 0:a.fullName)||e.name||"").toLowerCase();case"powerstats":{const B=e.powerstats||{};return Object.values(B).reduce((k,I)=>k+w(I),0)}case"race":return(((r=e.appearance)==null?void 0:r.race)||"").toLowerCase();case"gender":return(((s=e.appearance)==null?void 0:s.gender)||"").toLowerCase();case"height":return w((c=(o=e.appearance)==null?void 0:o.height)==null?void 0:c[1]);case"weight":return w((i=(l=e.appearance)==null?void 0:l.weight)==null?void 0:i[1]);case"placeOfBirth":return(((y=e.biography)==null?void 0:y.placeOfBirth)||"").toLowerCase();case"alignment":return(((C=e.biography)==null?void 0:C.alignment)||"").toLowerCase();default:return null}},D=(e,t=300)=>{let n=null;return(...a)=>{clearTimeout(n),n=setTimeout(()=>e(...a),t)}},F=(e,t)=>{const n=t*(e-1),a=n+t;return{start:n,end:a}},x=(e,t,n="asc")=>{const a=n==="asc";return[...e].sort((r,s)=>{const o=E(r,t),c=E(s,t);if(o===null&&c===null)return 0;if(o===null)return 1;if(c===null)return-1;let l;return typeof o=="number"&&typeof c=="number"?l=o-c:l=String(o).localeCompare(String(c)),a?l:-l})};let f=[],$=null,h="id",p="asc";const v={0:"id",1:"icon",2:"name",3:"fullName",4:"powerstats",5:"race",6:"gender",7:"height",8:"weight",9:"placeOfBirth",10:"alignment"},V=(e,t)=>{$=t,e.addEventListener("click",a=>{const r=a.target.closest("tr");if(!r)return;const s=r.dataset.id,o=f.find(c=>c.id===Number(s));o&&($.showModal(),q(o))}),document.querySelector("thead").addEventListener("click",a=>{const r=a.target.closest("th");if(!r||r.cellIndex===1)return;const s=v[r.cellIndex];if(!s)return;h===s?p=p==="asc"?"desc":"asc":(h=s,p="asc"),S();const o=x(f,h,p);g(o,_(),1)})},_=()=>{const e=document.getElementById("pageSize");return e.value==="all"?f.length:Number(e.value)},S=()=>{document.querySelectorAll("thead th").forEach((t,n)=>{t.classList.remove("sort-asc","sort-desc"),v[n]===h&&t.classList.add(p==="asc"?"sort-asc":"sort-desc")})},g=(e,t=20,n=1)=>{f=e;const a=x(e,h,p),r=document.querySelector("tbody"),{start:s,end:o}=F(n,t),c=a.slice(s,o);r.replaceChildren(),c.forEach(l=>{const i=G(l);r.appendChild(i)}),N(a,t,n),S()},G=e=>{var a,r;const t=document.createElement("tr");t.dataset.id=e.id,t.classList.add("row");const n=[d("th",e.id,{"data-id":e.id}),K(e),d("td",e.name),d("td",e.biography.fullName||e.name),Q(e.powerstats),d("td",e.appearance.race||"unknown"),d("td",e.appearance.gender),d("td",((a=e.appearance.height)==null?void 0:a[1])||"unknown"),d("td",((r=e.appearance.weight)==null?void 0:r[1])||"unknown"),d("td",e.biography.placeOfBirth||"unknown"),d("td",e.biography.alignment)];return t.append(...n),t},d=(e,t,n={})=>{const a=document.createElement(e);return a.textContent=t,Object.entries(n).forEach(([r,s])=>{a.setAttribute(r,s)}),a},K=e=>{const t=document.createElement("td");t.classList.add("image");const n=document.createElement("img");return n.src=e.images.xs,n.alt=e.name,t.appendChild(n),t},Q=e=>{const t=document.createElement("td");return Object.entries(e).forEach(([n,a])=>{const r=document.createElement("div");r.textContent=`${n}: ${a}`,t.appendChild(r)}),t},W=(e,t)=>{if(!t||!e)return e||[];const n=t.toLowerCase().trim();return e.filter(a=>a.name.toLowerCase().includes(n))};let m=[],u=null;const J=()=>{u||(u=document.createElement("div"),u.id="loading",u.textContent="Loading heroes...",u.style.cssText="text-align: center; padding: 20px; font-size: 18px;",document.body.insertBefore(u,document.querySelector("table"))),u.style.display="block"},b=()=>{u&&(u.style.display="none")},X=e=>{const t=document.getElementById("error");t&&t.remove();const n=document.createElement("div");n.id="error",n.textContent=e,n.style.cssText="color: red; text-align: center; padding: 20px; font-size: 18px;",document.body.insertBefore(n,document.querySelector("table"))},L=e=>e?W(m,e):m,Y=async()=>{const e=document.querySelector("tbody"),t=document.getElementById("dialog");V(e,t);const n=document.getElementById("pageSize"),a=document.getElementById("inputSearch"),r=document.getElementById("close");n.addEventListener("change",o=>{const c=o.target.value,l=c==="all"?m.length:Number(c);g(L(a.value),l,1)});const s=D(o=>{const c=n.value==="all"?m.length:Number(n.value);g(L(o),c,1)},300);a.addEventListener("input",o=>{const c=o.target.value;if(!c){g(m,Number(n.value),1);return}s(c)}),r.addEventListener("click",()=>{t.returnValue="",t.close()});try{J(),m=await A(),b(),g(m,20,1)}catch{b(),X("Failed to load heroes. Please refresh the page.")}};document.addEventListener("DOMContentLoaded",Y);
